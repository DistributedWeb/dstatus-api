<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/assets/styles.css">
    <link rel="stylesheet" href="/assets/syntax.css">
  </head>
  <body class="page">
    <nav>
      <h1><a href="/">Unwalled.Garden</a></h1>
      <ul>
        <li>Docs
          <ul>
            <li><a href="/docs/how-does-it-work">How it works</a></li>
            <li><a href="/docs/examples/one">Example 1</a></li>
          </ul>
        </li>
      </ul>
      <ul>
  <li>APIs
    <ul>
      <li><a href="/docs/api/bookmarks">Bookmarks</a></li>
      <li><a href="/docs/api/graph">Graph</a></li>
      <li><a href="/docs/api/posts">Posts</a></li>
      <li><a href="/docs/api/profiles">Profiles</a></li>
      <li><a href="/docs/api/reactions">Reactions</a></li>
      <li><a href="/docs/api/search">Search</a></li>
    </ul>
  </li>
</ul>
<ul>
  <li>Site types
    <ul>
      <li><a href="/application">Application</a></li>
      <li><a href="/module">Module</a></li>
      <li><a href="/person">Person</a></li>
      <li><a href="/website">Website</a></li>
    </ul>
  </li>
</ul>
<ul>
  <li>JSON types
    <ul>
      <li><a href="/bookmark">Bookmark</a></li>
      <li><a href="/comment">Comment</a></li>
      <li><a href="/follows">Follows</a></li>
      <li><a href="/post">Post</a></li>
      <li><a href="/reaction">Reaction</a></li>
      <li><a href="/recommendation">Recommendation</a></li>
    </ul>
  </li>
</ul>
<ul>
  <li>Links
    <ul>
      <li><a href="https://github.com/beakerbrowser/unwalled.garden">Github Repo</a></li>
      <li><a href="https://beakerbrowser.com">Beaker Browser</a></li>
      <li><a href="https://dat.foundation">Dat protocol</a></li>
    </ul>
  </li>
</ul>
    </nav>
    <main><h2>Posts API</h2><div class="notice">Status: DRAFT. Part of the upcoming <a href="https://beakerbrowser.com">Beaker Browser</a> 0.9 release.</div>
<p>Read and create broadcasted content. Posts are typically integrated into a feed UI.</p>
<hr>
<pre><code class="language-js"><span class="hljs-keyword">import</span> {posts} <span class="hljs-keyword">from</span> <span class="hljs-string">'dat://unwalled.garden/index.js'</span>

<span class="hljs-comment">// read</span>
<span class="hljs-keyword">await</span> posts.query({
  <span class="hljs-attr">filters</span>: {authors},
  offset,
  limit,
  reverse
})
<span class="hljs-keyword">await</span> posts.get(postUrl)

<span class="hljs-comment">// write</span>
<span class="hljs-keyword">await</span> posts.add(body)
<span class="hljs-keyword">await</span> posts.edit(postUrl, body)
<span class="hljs-keyword">await</span> posts.delete(postUrl)
</code></pre>
<hr>
<h3><code>Post</code></h3>
<p>The values returned by posts functions will fit the following object shape:</p>
<ul>
<li><var>url</var> <code>string</code> <small>The URL of the post.</small></li>
<li><var>content</var> <code>Object</code>
<ul>
<li><var>body</var> <code>string</code> <small>The text body of the post. Limited to 280 characters in length.</small></li>
</ul>
</li>
<li><var>crawledAt</var> <code>number</code> <small>The timestamp of when this post was crawled by the local computer.</small></li>
<li><var>createdAt</var> <code>number</code> <small>The timestamp of when the post claims it was created.</small></li>
<li><var>updatedAt</var> <code>number</code> <small>The timestamp of when the post claims it was last updated.</small></li>
<li><var>author</var> <code>Object</code> <small>The post author’s information.</small>
<ul>
<li><var>url</var> <code>string</code></li>
<li><var>title</var> <code>string</code></li>
<li><var>description</var> <code>string</code></li>
<li><var>type</var> <code>string[]</code></li>
</ul>
</li>
</ul>
<hr>
<h3><code>posts.query([opts])</code></h3>
<p>Get a list of posts, ordered by the posts’ claimed creation dates.</p>
<ul>
<li><var>opts</var> <code>Object</code>
<ul>
<li><var>filters</var> <code>Object</code>
<ul>
<li><var>authors</var> <code>string|string[]</code> <small>A URL or set of URLs of authors to filter the listing down to.</small></li>
</ul>
</li>
<li><var>offset</var> <code>number</code></li>
<li><var>limit</var> <code>number</code></li>
<li><var>reverse</var> <code>boolean</code></li>
</ul>
</li>
<li>Returns <code>Promise&lt;Post[]&gt;</code></li>
</ul>
<p>By default, all crawled posts will be included in the output. If you want to only show posts by sites that the user follows, use the <a href="./graph">graph API</a> to get the followed sites and pass their URLs into the <var>authors</var> filter.</p>
<hr>
<h3><code>posts.get(postUrl)</code></h3>
<p>Get an individual post by its URL.</p>
<ul>
<li><var>postUrl</var> <code>string</code> <small>The URL of the post you want to read.</small></li>
<li>Returns <code>Promise&lt;Post&gt;</code></li>
</ul>
<hr>
<h3><code>posts.add(body)</code></h3>
<p>Add a post to the current user’s site.</p>
<ul>
<li><var>body</var> <code>string</code> <small>The text body of the post. Limited to 280 characters in length.</small></li>
<li>Returns <code>Promise&lt;Post&gt;</code></li>
</ul>
<p>Example usage:</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> myPost = <span class="hljs-keyword">await</span> posts.add(<span class="hljs-string">'Hello, world!'</span>)
</code></pre>
<hr>
<h3><code>posts.edit(postUrl, body)</code></h3>
<p>Edit a post on the current user’s site.</p>
<ul>
<li><var>postUrl</var> <code>string</code> <small>The URL of the post you want to edit.</small></li>
<li><var>body</var> <code>string</code> <small>The text body of the post. Limited to 280 characters in length.</small></li>
<li>Returns <code>Promise&lt;Post&gt;</code></li>
</ul>
<p>Example usage:</p>
<pre><code class="language-js">myPost = <span class="hljs-keyword">await</span> posts.add(myPost.url, <span class="hljs-string">'Hello, world!!'</span>)
</code></pre>
<hr>
<h3><code>posts.delete(postUrl)</code></h3>
<p>Delete a post on the current user’s site.</p>
<ul>
<li><var>postUrl</var> <code>string</code> <small>The URL of the post you want to delete.</small></li>
<li>Returns <code>Promise&lt;void&gt;</code></li>
</ul>
<hr>
</main>
  </body>
</html>

<!doctype html>
<html>
  <head>
    <title>Relationships API | Unwalled.Garden</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/assets/styles.css">
    <link rel="stylesheet" href="/assets/syntax.css">
  </head>
  <body>
    <h1><a href="/">Unwalled.Garden</a></h1>
    <a class="nav-open"><img src="/assets/hamburger.svg"></a>
    <div class="notice">Status: DRAFT. Part of the upcoming <a href="https://beakerbrowser.com">Beaker Browser</a> 0.9 release.</div>
    <div class="page">
      <nav>
        <a class="nav-close"><img src="/assets/hamburger.svg"></a>
        <ul>
    <li>Docs
      <ul>
        <li><a href="/docs/how-does-it-work">How it works</a></li>
        <li><a href="/docs/dat-primer">Dat protocol</a><ul>
          <li><a href="/docs/mounts">Mounts</a></li>
        </ul></li>
        <li><a href="/docs/browser-integration">Browser integration</a></li>
        <li><a href="/docs/common-fields">Common fields</a></li>
        <li><a href="/docs/why-not-rdf">Why not RDF?</a></li>
      </ul>
    </li>
  </ul>
<ul>
  <li>APIs
    <ul>
      <li><a href="/docs/api/bookmarks">Bookmarks</a></li>
      <li><a href="/docs/api/comments">Comments</a></li>
      <li><a href="/docs/api/follows">Follows</a></li>
      <li><a href="/docs/api/posts">Posts</a></li>
      <li><a href="/docs/api/profiles">Profiles</a></li>
      <li><a href="/docs/api/reactions">Reactions</a></li>
      <li><a href="/docs/api/relationships">Relationships</a></li>
    </ul>
  </li>
</ul>
<ul>
  <li>Schemas
    <ul>
      <li><a href="/bookmark">Bookmark</a></li>
      <li><a href="/comment">Comment</a></li>
      <li><a href="/follows">Follows</a></li>
      <li><a href="/person">Person</a></li>
      <li><a href="/post">Post</a></li>
      <li><a href="/reaction">Reaction</a></li>
      <li><a href="/relationship">Relationship</a></li>
      <li>dir<ul>
        <li><a href="/dir/data">Data</a></li>
        <li><a href="/dir/refs">Refs</a></li>
      </ul></li>
    </ul>
  </li>
</ul>
<ul>
  <li>Links
    <ul>
      <li><a href="https://github.com/beakerbrowser/unwalled.garden">Github Repo</a></li>
      <li><a href="https://beakerbrowser.com">Beaker Browser</a></li>
      <li><a href="https://dat.foundation">Dat protocol</a></li>
    </ul>
  </li>
</ul>
      </nav>
      <main><h2>Relationships API</h2>
<p>Relationships are declarations of a linkage between two resources on the Web. They can be used to declare things such as “Alice is the spouse of Bob” and “Carla is an employee of Foo Inc.”</p>
<p>The records take the shape of <code>{a, rel, b}</code>. The way to read relationships is as follows:</p>
<pre><code>{a} is a/an/the {rel} of/to/about/with {b}
</code></pre>
<p>For instance, the following record:</p>
<pre><code class="language-json">{
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"unwalled.garden/relationship"</span>,
  <span class="hljs-attr">"a"</span>: <span class="hljs-string">"dat://alice.com"</span>,
  <span class="hljs-attr">"rel"</span>: <span class="hljs-string">"spouse"</span>,
  <span class="hljs-attr">"b"</span>: <span class="hljs-string">"dat://bob.com"</span>,
  <span class="hljs-attr">"createdAt"</span>: <span class="hljs-string">"2018-12-07T02:52:11.947Z"</span>
}
</code></pre>
<p>Should be read as:</p>
<pre><code>dat://alice.com is the spouse of dat://bob.com
</code></pre>
<p>The <code>rel</code> field may be any alphanumeric string. Here are some suggested values:</p>
<ul>
<li>Friends
<ul>
<li><code>&quot;acquaintance&quot;</code></li>
<li><code>&quot;friend&quot;</code></li>
<li><code>&quot;significantOther&quot;</code></li>
<li><code>&quot;neighbor&quot;</code></li>
</ul>
</li>
<li>Enemies
<ul>
<li><code>&quot;antagonist&quot;</code></li>
<li><code>&quot;critic&quot;</code></li>
<li><code>&quot;enemy&quot;</code></li>
<li><code>&quot;hater&quot;</code></li>
<li><code>&quot;rival&quot;</code></li>
<li><code>&quot;suspicious&quot;</code></li>
</ul>
</li>
<li>Events
<ul>
<li><code>&quot;attendee&quot;</code></li>
<li><code>&quot;participant&quot;</code></li>
</ul>
</li>
<li>Family
<ul>
<li><code>&quot;ancestor&quot;</code></li>
<li><code>&quot;child&quot;</code></li>
<li><code>&quot;descendant&quot;</code></li>
<li><code>&quot;engaged&quot;</code></li>
<li><code>&quot;grandchild&quot;</code></li>
<li><code>&quot;grandparent&quot;</code></li>
<li><code>&quot;lifePartner&quot;</code></li>
<li><code>&quot;parent&quot;</code></li>
<li><code>&quot;sibling&quot;</code></li>
<li><code>&quot;spouse&quot;</code></li>
</ul>
</li>
<li>Projects
<ul>
<li><code>&quot;alternative&quot;</code></li>
<li><code>&quot;author&quot;</code></li>
<li><code>&quot;competitor&quot;</code></li>
<li><code>&quot;contributor&quot;</code></li>
<li><code>&quot;creator&quot;</code></li>
<li><code>&quot;designer&quot;</code></li>
<li><code>&quot;evangelist&quot;</code></li>
<li><code>&quot;fan&quot;</code></li>
<li><code>&quot;founder&quot;</code></li>
<li><code>&quot;implementor&quot;</code></li>
<li><code>&quot;inspiration&quot;</code></li>
<li><code>&quot;passionate&quot;</code></li>
<li><code>&quot;promoter&quot;</code></li>
<li><code>&quot;supporter&quot;</code></li>
<li><code>&quot;user&quot;</code></li>
</ul>
</li>
<li>Work
<ul>
<li><code>&quot;advisor&quot;</code></li>
<li><code>&quot;apprentice&quot;</code></li>
<li><code>&quot;collaborator&quot;</code></li>
<li><code>&quot;colleague&quot;</code></li>
<li><code>&quot;employer&quot;</code></li>
<li><code>&quot;funder&quot;</code></li>
<li><code>&quot;mentor&quot;</code></li>
</ul>
</li>
</ul>
<hr>
<pre><code class="language-js"><span class="hljs-keyword">import</span> {relationships} <span class="hljs-keyword">from</span> <span class="hljs-string">'dat://unwalled.garden/index.js'</span>

<span class="hljs-comment">// read</span>
<span class="hljs-keyword">await</span> relationships.list({
  <span class="hljs-attr">filters</span>: {authors, <span class="hljs-keyword">as</span>, rels, bs, visiblity},
  sortBy,
  offset,
  limit,
  reverse
})
<span class="hljs-keyword">await</span> relationships.get(url)

<span class="hljs-comment">// write</span>
<span class="hljs-keyword">await</span> relationships.add({a, rel, b, visibility})
<span class="hljs-keyword">await</span> relationships.edit(url, {a, rel, b, visibility})
<span class="hljs-keyword">await</span> relationships.delete(url)
</code></pre>
<hr>
<h3>Relationship</h3>
<p>The values returned by relationship functions will fit the following object shape:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td><code>string</code></td>
<td>The URL of the relationship record</td>
</tr>
<tr>
<td>a</td>
<td><code>string</code></td>
<td>The URL that’s the “object” of the relationship</td>
</tr>
<tr>
<td>rel</td>
<td><code>string</code></td>
<td>The ID of the relationship</td>
</tr>
<tr>
<td>b</td>
<td><code>string</code></td>
<td>The URL that’s the “subject” of the relationship</td>
</tr>
<tr>
<td>author</var></td>
<td><code>Object</code></td>
<td>The site that authored the relationship</td>
</tr>
<tr>
<td> url</var></td>
<td><code>string</code></td>
<td></td>
</tr>
<tr>
<td> title</var></td>
<td><code>string</code></td>
<td></td>
</tr>
<tr>
<td> description</var></td>
<td><code>string</code></td>
<td></td>
</tr>
<tr>
<td> type</var></td>
<td><code>string[]</code></td>
<td></td>
</tr>
<tr>
<td>visibility</var></td>
<td><code>string</code></td>
<td>The <a href="/docs/common-fields#visibility">visibility</a> of the relationship</td>
</tr>
</tbody>
</table>
<hr>
<h3>list(opts)</h3>
<p>List the relationships on the network.</p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>opts</td>
<td><code>Object</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td> filters</td>
<td><code>Object</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>  authors</td>
<td><code>string|string[]</code></td>
<td></td>
<td>Site URLs</td>
</tr>
<tr>
<td>  as</td>
<td><code>string|string[]</code></td>
<td></td>
<td>URLs</td>
</tr>
<tr>
<td>  rels</td>
<td><code>string|string[]</code></td>
<td></td>
<td>Relationship IDs</td>
</tr>
<tr>
<td>  bs</td>
<td><code>string|string[]</code></td>
<td></td>
<td>URLs</td>
</tr>
<tr>
<td>  visibility</td>
<td><code>string</code></td>
<td><code>'all'</code></td>
<td>See <a href="/docs/common-fields#visibility">visibility</a></td>
</tr>
<tr>
<td> sortBy</td>
<td><code>string</code></td>
<td><code>'createdAt'</code></td>
<td>One of: <code>'createdAt'</code></td>
</tr>
<tr>
<td> offset</td>
<td><code>number</code></td>
<td>0</td>
<td></td>
</tr>
<tr>
<td> limit</td>
<td><code>number</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td> reverse</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise&lt;Relationship[]&gt;</code></td>
</tr>
</tbody>
</table>
<hr>
<h3>get(url)</h3>
<p>Get an individual relationship by its URL.</p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td><code>string</code></td>
<td></td>
<td>Relationship URL (required)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise&lt;Relationship&gt;</code></td>
</tr>
</tbody>
</table>
<hr>
<h3>add(relationship)</h3>
<p>Add a relationship to the current user’s site.</p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>relationship</td>
<td><code>Object</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td> a</td>
<td><code>string</code></td>
<td></td>
<td>The URL of the “object” of the relationship (required)</td>
</tr>
<tr>
<td> rel</td>
<td><code>string</code></td>
<td></td>
<td>The ID of the relationship (required)</td>
</tr>
<tr>
<td> b</td>
<td><code>string</code></td>
<td></td>
<td>The URL of the “subject” of the relationship (required)</td>
</tr>
<tr>
<td> visibility</td>
<td><code>string</code></td>
<td><code>'public'</code></td>
<td>See <a href="/docs/common-fields#visibility">visibility</a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise&lt;Relationship&gt;</code></td>
</tr>
</tbody>
</table>
<hr>
<h3>edit(url, relationship)</h3>
<p>Edit a relationship on the current user’s site.</p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td><code>string</code></td>
<td></td>
<td>The URL of the relationship you want to edit (required)</td>
</tr>
<tr>
<td>relationship</td>
<td><code>Object</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td> a</td>
<td><code>string</code></td>
<td></td>
<td>The URL of the “object” of the relationship</td>
</tr>
<tr>
<td> rel</td>
<td><code>string</code></td>
<td></td>
<td>The ID of the relationship</td>
</tr>
<tr>
<td> b</td>
<td><code>string</code></td>
<td></td>
<td>The URL of the “subject” of the relationship</td>
</tr>
<tr>
<td> visibility</td>
<td><code>string</code></td>
<td><code>'public'</code></td>
<td>See <a href="/docs/common-fields#visibility">visibility</a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise&lt;Relationship&gt;</code></td>
</tr>
</tbody>
</table>
<hr>
<h3>delete(url)</h3>
<p>Delete a relationship on the current user’s site.</p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Default</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td><code>string</code></td>
<td></td>
<td>The URL of the relationship you want to delete (required)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise&lt;void&gt;</code></td>
</tr>
</tbody>
</table>
<hr>
</main>
    </div>
  </body>
  <script type="module" src="/assets/admin.js"></script>
  <script>
    document.querySelector('.nav-open').addEventListener('click', e => {
      document.querySelector('nav').classList.add('show')
    })
    document.querySelector('.nav-close').addEventListener('click', e => {
      document.querySelector('nav').classList.remove('show')
    })
  </script>
</html>
